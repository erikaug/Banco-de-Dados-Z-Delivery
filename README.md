CREATE TABLE FORNECEDOR(
    Cod_FORNECEDOR INT PRIMARY KEY,
    Nome VARCHAR(100),
    CNPJ VARCHAR(14),
    Email VARCHAR(100),
    Telefone VARCHAR(20),
    Endereco VARCHAR(100)
);

CREATE TABLE USUARIO (
    Cod_USUARIO INT PRIMARY KEY,
    Login VARCHAR(50),
    Senha VARCHAR(100),
    Email VARCHAR(100)
);

CREATE TABLE CLIENTE (
    Cod_CLIENTE INT PRIMARY KEY,
    Cod_USUARIO INT,
    Nome VARCHAR(100),
    CPF VARCHAR(14),
    Telefone VARCHAR(20),
    Endereco VARCHAR(100),
    FOREIGN KEY (Cod_USUARIO) REFERENCES USUARIO(Cod_USUARIO)
);

CREATE TABLE VENDEDOR (
    Cod_VENDEDOR INT PRIMARY KEY,
    Cod_USUARIO INT,
    Cod_LOJA INT,
    Nome VARCHAR(100),
    CPF VARCHAR(14),
    Endereco VARCHAR(100),
    Telefone VARCHAR(20),
    ADMIN BOOLEAN,
    FOREIGN KEY (Cod_USUARIO) REFERENCES USUARIO(Cod_USUARIO),
    FOREIGN KEY (Cod_LOJA) REFERENCES LOJA(Cod_LOJA)
);

CREATE TABLE LOJA (
    Cod_LOJA INT PRIMARY KEY,
    Nome VARCHAR(100),
    Endereco VARCHAR(100),
    Telefone VARCHAR(20)
);

CREATE TABLE RELATORIO (
    Cod_RELATORIO INT PRIMARY KEY,
    Cod_LOJA INT,
    ValorTotal DECIMAL(10, 2),
     DataFim DATE,
     DataInicio DATE,
    FOREIGN KEY (Cod_LOJA) REFERENCES LOJA(Cod_LOJA)
);

CREATE TABLE PRODUTO (
    Cod_PRODUTO INT PRIMARY KEY,
    Cod_FORNECEDOR INT,
    Nome VARCHAR(100),
    ValorProduto DECIMAL(10, 2),
    FOREIGN KEY (Cod_FORNECEDOR) REFERENCES FORNECEDOR(Cod_FORNECEDOR)
); 
CREATE TABLE PEDIDO (
    Cod_PEDIDO INT PRIMARY KEY,
    Cod_CLIENTE INT,
    Cod_VENDEDOR INT,
    Cod_LOJA INT,
    Status VARCHAR(50),
    TempoEspera TIME,
    ValorPedido DECIMAL(10, 2),
    Data DATE,
    FOREIGN KEY (Cod_CLIENTE) REFERENCES CLIENTE(Cod_CLIENTE),
    FOREIGN KEY (Cod_LOJA) REFERENCES LOJA(Cod_LOJA),
    FOREIGN KEY (Cod_VENDEDOR) REFERENCES VENDEDOR(Cod_VENDEDOR)
);

CREATE TABLE ITENSPEDIDO (
    Cod_ITENSPEDIDO INT PRIMARY KEY,
    Cod_PEDIDO INT,
    Cod_PRODUTO INT,
    QuantidadeProduto INT,
    FOREIGN KEY (Cod_PEDIDO) REFERENCES PEDIDO(Cod_PEDIDO),
    FOREIGN KEY (Cod_PRODUTO) REFERENCES PRODUTO(Cod_PRODUTO)
);

CREATE TABLE ESTOQUE (
    Cod_ESTOQUE INT PRIMARY KEY,
    Cod_PRODUTO INT,
    Cod_LOJA INT,
    QuantidadeProduto INT,
    FOREIGN KEY (Cod_PRODUTO) REFERENCES PRODUTO(Cod_PRODUTO),
    FOREIGN KEY (Cod_LOJA) REFERENCES LOJA(Cod_LOJA)
);

INSERT INTO FORNECEDOR (Cod_FORNECEDOR, Nome, CNPJ, Email, Telefone, Endereco) VALUES
(1, 'Fornecedor A', '12345678901234', 'forneceA@gmail.com', '123-456-7890', 'Endereco A'),
(2, 'Fornecedor B', '98765432109876', 'forneceB@gmail.com', '988-654-3210', 'Endereco B'),
(3, 'Fornecedor C', '98765432107876', 'forneceC@gmail.com', '989-654-3210', 'Endereco C'),
(4, 'Fornecedor D', '98765432108876', 'forneceD@gmail.com', '911-654-3210', 'Endereco D');


INSERT INTO USUARIO (Cod_USUARIO, Login, Senha, Email) VALUES
(1, 'usuario A', 'senhaA123', 'usuarioA@gmail.com'),
(2, 'usuario B', 'senhaB456', 'usuarioB@gmail.com'),
(3, 'usuario C', 'senhaC444', 'usuarioC@gmail.com'),
(4, 'usuario D', 'senhaD556', 'usuarioD@gmail.com');


INSERT INTO CLIENTE (Cod_CLIENTE, Cod_USUARIO, Nome, CPF, Telefone, Endereco) VALUES
(1, 1, 'Cliente A', '123.456.789-01', '111-222-3333', 'Aparecida'),
(2, 2, 'Cliente B', '987.654.321-09', '444-555-6666', 'Caicara'),
(3, 3, 'Cliente C', '988.654.321-09', '445-555-6666', 'Belvedere'),
(4, 4, 'Cliente D', '989.654.321-09', '443-555-6666', 'Sion');


INSERT INTO VENDEDOR (Cod_VENDEDOR, Cod_USUARIO, Cod_LOJA, Nome, CPF, Endereco, Telefone, ADMIN) VALUES
(1, 1, 1, 'Vendedor A', '123.456.789-01', 'Betania', '777-888-9999', 1),
(2, 2, 2, 'Vendedor B', '987.654.321-09', 'Castelo', '222-222-3333', 0),
(3, 3, 3, 'Vendedor C', '955.654.321-09', 'Brumadinho', '111-222-3333', 1),
(4, 4, 4, 'Vendedor D', '933.654.321-09', 'Jaragua', '333-222-3333', 0);


INSERT INTO LOJA (Cod_LOJA, Nome, Endereco, Telefone) VALUES
(1, 'Loja A', 'Betania', '123-456-7890'),
(2, 'Loja B', 'Castelo', '987-654-3333'),
(3, 'Loja C', 'Castelo', '987-654-3222'),
(4, 'Loja D', 'jaragua', '987-654-3211');


INSERT INTO RELATORIO (Cod_RELATORIO, Cod_LOJA, ValorTotal, DataFim, DataInicio) VALUES
(1, 1, 1500.50, '2023-11-30', '2023-11-01'),
(2, 2, 2000.75, '2023-12-15', '2023-12-01'),
(3, 3, 2000.00, '2023-09-11', '2023-10-01'),
(4, 4, 4230.25, '2023-12-05', '2023-09-01');


INSERT INTO PRODUTO (Cod_PRODUTO, Cod_FORNECEDOR, Nome, ValorProduto) VALUES
(1, 1, 'Produto A', 50.99),
(2, 2, 'Produto B', 75.50),
(3, 3, 'Produto C', 55.50),
(4, 4, 'Produto D', 65.50);


INSERT INTO PEDIDO (Cod_PEDIDO, Cod_CLIENTE, Cod_VENDEDOR, Cod_LOJA, Status, TempoEspera, ValorPedido, Data) VALUES
(1, 1, 1, 1, 'Em andamento', '01:30:00', 100.25, '2023-11-20'),
(2, 2, 2, 2, 'Concluído', '00:45:00', 80.50, '2023-10-22'),
(3, 3, 3, 3, 'Concluído', '00:55:00', 70.50, '2023-12-20'),
(4, 4, 4, 4, 'Concluído', '00:25:00', 50.50, '2023-09-21');


INSERT INTO ITENSPEDIDO (Cod_ITENSPEDIDO, Cod_PEDIDO, Cod_PRODUTO, QuantidadeProduto) VALUES
(1, 1, 1, 2),
(2, 2, 2, 1),
(3, 3, 3, 3),
(4, 4, 4, 4);


INSERT INTO ESTOQUE (Cod_ESTOQUE, Cod_PRODUTO, Cod_LOJA, QuantidadeProduto) VALUES
(1, 1, 1, 50),
(2, 2, 2, 30),
(3, 3, 3, 25),
(4, 4, 4, 20);

UPDATE FORNECEDOR SET Telefone = '111-222-3333' WHERE Cod_FORNECEDOR = 3;
UPDATE FORNECEDOR SET Email = 'novoFornecedorD@email.com' WHERE Cod_FORNECEDOR = 4;
UPDATE FORNECEDOR SET Endereco = 'Novo Endereco B' WHERE Cod_FORNECEDOR = 2;
UPDATE FORNECEDOR SET Nome = 'Novo Fornecedor C', CNPJ = '11112222333344' WHERE Cod_FORNECEDOR = 3;

UPDATE USUARIO SET Senha = 'novasenha456' WHERE Cod_USUARIO = 2;
UPDATE USUARIO SET Login = 'novoUsuarioC' WHERE Cod_USUARIO = 3;
UPDATE USUARIO SET Email = 'novoemailD@gmail.com' WHERE Cod_USUARIO = 4;
UPDATE USUARIO SET Senha = 'senhaAtualizada123' WHERE Cod_USUARIO = 1;

UPDATE CLIENTE SET Endereco = 'Novo Endereco Cliente A' WHERE Cod_CLIENTE = 1;
UPDATE CLIENTE SET CPF = '111.222.333-44' WHERE Cod_CLIENTE = 2;
UPDATE CLIENTE SET Nome = 'Novo Cliente B', Telefone = '999-888-7777' WHERE Cod_CLIENTE = 2;
UPDATE CLIENTE SET Cod_USUARIO = 3 WHERE Cod_CLIENTE = 3;

UPDATE VENDEDOR SET ADMIN = 1 WHERE Cod_VENDEDOR = 1;
UPDATE VENDEDOR SET Endereco = 'Novo Endereco Vendedor B' WHERE Cod_VENDEDOR = 2;
UPDATE VENDEDOR SET Nome = 'Novo Vendedor C', CPF = '333.444.555-66' WHERE Cod_VENDEDOR = 3;
UPDATE VENDEDOR SET Telefone = '777-888-9999' WHERE Cod_VENDEDOR = 4;

UPDATE LOJA SET Telefone = '555-444-3333' WHERE Cod_LOJA = 1;
UPDATE LOJA SET Endereco = 'Novo Endereco Loja B' WHERE Cod_LOJA = 2;
UPDATE LOJA SET Nome = 'Nova Loja C' WHERE Cod_LOJA = 2;
UPDATE LOJA SET Nome = 'Nova Loja D', Telefone = '111-222-3333' WHERE Cod_LOJA = 4;

UPDATE RELATORIO SET ValorTotal = 2000.50 WHERE Cod_RELATORIO = 1;
UPDATE RELATORIO SET DataFim = '2023-12-01', DataInicio = '2023-11-01' WHERE Cod_RELATORIO = 2;
UPDATE RELATORIO SET Cod_LOJA = 2 WHERE Cod_RELATORIO = 1;
UPDATE RELATORIO SET Cod_LOJA = 3, ValorTotal = 2500.75 WHERE Cod_RELATORIO = 2;

UPDATE PRODUTO SET ValorProduto = 65.00 WHERE Cod_PRODUTO = 1;
UPDATE PRODUTO SET Nome = 'Novo Produto B' WHERE Cod_PRODUTO = 2;
UPDATE PRODUTO SET Cod_FORNECEDOR = 2 WHERE Cod_PRODUTO = 1;
UPDATE PRODUTO SET Cod_FORNECEDOR = 3, ValorProduto = 80.00 WHERE Cod_PRODUTO = 2;

UPDATE PEDIDO SET Status = 'Cancelado' WHERE Cod_PEDIDO = 1;
UPDATE PEDIDO SET ValorPedido = 90.00 WHERE Cod_PEDIDO = 2;
UPDATE PEDIDO SET TempoEspera = '02:00:00' WHERE Cod_PEDIDO = 3;
UPDATE PEDIDO SET Cod_VENDEDOR = 1 WHERE Cod_PEDIDO = 4;

UPDATE ITENSPEDIDO SET QuantidadeProduto = 3 WHERE Cod_ITENSPEDIDO = 1;
UPDATE ITENSPEDIDO SET Cod_PRODUTO = 3 WHERE Cod_ITENSPEDIDO = 2;
UPDATE ITENSPEDIDO SET Cod_PEDIDO = 2 WHERE Cod_ITENSPEDIDO = 3;
UPDATE ITENSPEDIDO SET QuantidadeProduto = 5 WHERE Cod_ITENSPEDIDO = 4;

UPDATE ESTOQUE SET QuantidadeProduto = 40 WHERE Cod_ESTOQUE = 1;
UPDATE ESTOQUE SET Cod_PRODUTO = 3 WHERE Cod_ESTOQUE = 2;
UPDATE ESTOQUE SET Cod_LOJA = 4 WHERE Cod_ESTOQUE = 3;
UPDATE ESTOQUE SET QuantidadeProduto = 15 WHERE Cod_ESTOQUE = 4;

SELECT * FROM FORNECEDOR;
SELECT * FROM FORNECEDOR WHERE CNPJ LIKE '9876%';
SELECT * FROM FORNECEDOR WHERE Telefone LIKE '%987%';
SELECT * FROM FORNECEDOR WHERE Email LIKE '%@gmail.com';

SELECT * FROM USUARIO;
SELECT * FROM USUARIO WHERE Login LIKE 'usuario%';
SELECT * FROM USUARIO WHERE Senha LIKE '%senha%';
SELECT * FROM USUARIO WHERE Email LIKE '%@gmail.com';

SELECT * FROM CLIENTE;
SELECT * FROM CLIENTE WHERE CPF LIKE '%789-01';
SELECT * FROM CLIENTE WHERE Telefone LIKE '%444%';
SELECT * FROM CLIENTE WHERE Nome LIKE 'Cliente%';

SELECT * FROM VENDEDOR;
SELECT * FROM VENDEDOR WHERE ADMIN = 1;
SELECT * FROM VENDEDOR WHERE Telefone LIKE '%3333';
SELECT * FROM VENDEDOR WHERE CPF LIKE '%987%';

SELECT * FROM LOJA;
SELECT * FROM LOJA WHERE Telefone LIKE '%3333';
SELECT * FROM LOJA WHERE Nome LIKE 'Loja%';
SELECT * FROM LOJA WHERE Endereco LIKE '%B';

SELECT * FROM RELATORIO;
SELECT * FROM RELATORIO WHERE ValorTotal > 2000;
SELECT * FROM RELATORIO WHERE MONTH(DataInicio) = 9;
SELECT * FROM RELATORIO WHERE Cod_LOJA = 2;

SELECT * FROM PRODUTO;
SELECT * FROM PRODUTO WHERE ValorProduto > 60;
SELECT * FROM PRODUTO WHERE Nome LIKE '%Produto%';
SELECT * FROM PRODUTO WHERE Cod_FORNECEDOR = 3;

SELECT * FROM PEDIDO;
SELECT * FROM PEDIDO WHERE ValorPedido > 80;
SELECT * FROM PEDIDO WHERE Status = 'Concluído';
SELECT * FROM PEDIDO WHERE Cod_CLIENTE = 1;

SELECT * FROM ITENSPEDIDO;
SELECT * FROM ITENSPEDIDO WHERE QuantidadeProduto > 2;
SELECT * FROM ITENSPEDIDO WHERE Cod_PRODUTO = 3;
SELECT * FROM ITENSPEDIDO WHERE Cod_PEDIDO = 2;

SELECT * FROM ESTOQUE;
SELECT * FROM ESTOQUE WHERE QuantidadeProduto > 30;
SELECT * FROM ESTOQUE WHERE Cod_LOJA = 4;
SELECT * FROM ESTOQUE WHERE Cod_PRODUTO = 1;

DELETE FROM FORNECEDOR WHERE Cod_FORNECEDOR = 1;
DELETE FROM FORNECEDOR WHERE CNPJ LIKE '9876%';
DELETE FROM FORNECEDOR WHERE Telefone LIKE '%987%';
DELETE FROM FORNECEDOR WHERE Email LIKE '%@gmail.com';

DELETE FROM USUARIO WHERE Cod_USUARIO = 1;
DELETE FROM USUARIO WHERE Login LIKE 'usuario%';
DELETE FROM USUARIO WHERE Senha LIKE '%senha%';
DELETE FROM USUARIO WHERE Email LIKE '%@gmail.com';

DELETE FROM CLIENTE WHERE Cod_CLIENTE = 1;
DELETE FROM CLIENTE WHERE CPF LIKE '%789-01';
DELETE FROM CLIENTE WHERE Telefone LIKE '%444%';
DELETE FROM CLIENTE WHERE Nome LIKE 'Cliente%';

DELETE FROM VENDEDOR WHERE Cod_VENDEDOR = 1;
DELETE FROM VENDEDOR WHERE ADMIN = 1;
DELETE FROM VENDEDOR WHERE Telefone LIKE '%3333';
DELETE FROM VENDEDOR WHERE CPF LIKE '%987%';

DELETE FROM LOJA WHERE Cod_LOJA = 1;
DELETE FROM LOJA WHERE Telefone LIKE '%3333';
DELETE FROM LOJA WHERE Nome LIKE 'Loja%';
DELETE FROM LOJA WHERE Endereco LIKE '%B';

DELETE FROM RELATORIO WHERE Cod_RELATORIO = 1;
DELETE FROM RELATORIO WHERE ValorTotal > 2000;
DELETE FROM RELATORIO WHERE MONTH(DataInicio) = 9;
DELETE FROM RELATORIO WHERE Cod_LOJA = 2;

DELETE FROM PRODUTO WHERE Cod_PRODUTO = 1;
DELETE FROM PRODUTO WHERE ValorProduto > 60;
DELETE FROM PRODUTO WHERE Nome LIKE '%Produto%';
DELETE FROM PRODUTO WHERE Cod_FORNECEDOR = 3;

DELETE FROM PEDIDO WHERE Cod_PEDIDO = 1;
DELETE FROM PEDIDO WHERE ValorPedido > 80;
DELETE FROM PEDIDO WHERE Status = 'Concluído';
DELETE FROM PEDIDO WHERE Cod_CLIENTE = 1;

DELETE FROM ITENSPEDIDO WHERE Cod_ITENSPEDIDO = 1;
DELETE FROM ITENSPEDIDO WHERE QuantidadeProduto > 2;
DELETE FROM ITENSPEDIDO WHERE Cod_PRODUTO = 3;
DELETE FROM ITENSPEDIDO WHERE Cod_PEDIDO = 2;

DELETE FROM ESTOQUE WHERE Cod_ESTOQUE = 1;
DELETE FROM ESTOQUE WHERE QuantidadeProduto > 30;
DELETE FROM ESTOQUE WHERE Cod_LOJA = 4;
DELETE FROM ESTOQUE WHERE Cod_PRODUTO = 1;

SELECT
    p.Cod_PEDIDO AS CodigoPedido,
    i.QuantidadeProduto AS Quantidade,
    pr.Nome AS NomeProduto
FROM PEDIDO p
JOIN ITENSPEDIDO i ON p.Cod_PEDIDO = i.Cod_PEDIDO
JOIN PRODUTO pr ON i.Cod_PRODUTO = pr.Cod_PRODUTO
WHERE i.QuantidadeProduto > 2
LIMIT 5;

SELECT
    v.Nome AS NomeVendedor,
    u.Email AS EmailUsuario,
    l.Nome AS NomeLoja
FROM VENDEDOR v
JOIN USUARIO u ON v.Cod_USUARIO = u.Cod_USUARIO
JOIN LOJA l ON v.Cod_LOJA = l.Cod_LOJA
LIMIT 5;

SELECT
    p.Cod_PEDIDO AS CodigoPedido,
    i.QuantidadeProduto AS Quantidade,
    pr.Nome AS NomeProduto
FROM PEDIDO p
JOIN ITENSPEDIDO i ON p.Cod_PEDIDO = i.Cod_PEDIDO
JOIN PRODUTO pr ON i.Cod_PRODUTO = pr.Cod_PRODUTO
LIMIT 5;

SELECT
    r.ValorTotal AS ValorRelatorio,
    l.Endereco AS EnderecoLoja,
    f.Nome AS NomeFornecedor
FROM RELATORIO r
JOIN LOJA l ON r.Cod_LOJA = l.Cod_LOJA
JOIN FORNECEDOR f ON r.Cod_LOJA = f.Cod_FORNECEDOR
LIMIT 5;
